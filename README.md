# 杀戮尖塔反编译

#### 简介
对杀戮尖塔进行反汇编得到的代码

#### 介绍
使用jadx-gui与JD-Core对"Steam\steamapps\common\SlayTheSpire"目录下的
desktop-1.0.jar进行反编译，即将.class文件转回.java。

使用maven导入项目所需要的依赖，但有些依赖因为不知道版本或各种报错，直接将依赖反编译放在main\
java的目录下，实际上该游戏的源码只有com\megacrit\cardcrawl文件夹下的内容,
其他均为依赖的源码。

#### 环境依赖

1.  **jdk17** _实在不想用1.8的老古董了，不过没用什么新语法，用1.8编译也行_
2.  **Apache Maven 3.8.1** 
3.  **Git** _version 2.33.0.windows.2_

#### 使用说明

1. 先从git仓库上拉代码，加载maven脚本 如果左下角没提示在项目中找到pom.xml,右键加载
2. idea->文件->设置->构建、执行、部署->构建工具->maven 设置maven的仓库位置、版本、setting.xml
3. idea->文件->设置->构建、执行、部署->构建工具->编译器->设置编译器版本为1.8或17
4. idea->文件->项目结构->设置相应的jdk版本，如果idea识别不出.java文件可以在模块中标识源代码与资源
5. idea中Ctrl+N搜索DesktopLauncher类,编译后启动游戏。

#### 必要说明
1. 直接反编译，有些地方一直报错，我改了的地方原本的写法都注释掉了，并加上todo进行标识，在idea右下TODO可找到我改的内容，
仅限com\megacrit\cardcrawl文件夹
2. 因为有些异常是运行是异常，有些地方我没玩到不知道会报错，有遇到错误的可以在邮箱或者知乎上发给我。
如果是高手先改好再提交代码给我就更好了
3. 反编译得到的代码有些反编译失败或者有很多奇奇怪怪的bug，现在已经发现和修改好的bug记录在下面，目前也是能完整碎心通关了。

#### 缺陷 & bug 

当前bug:
1. 某些分辨率/比例下光标可移动范围存在 bug
2. 若干 ui 动画显示问题（人物骨骼模型、动画缺失、毒对应血量的显示）
3. 敌方的？？？意图不显示
4. 地精转盘事件第一界面图像缺失
5. 部分事件中的文字数值描述有缺失


已解决bug:
1. 进入篝火报错
2. 战斗中结束回合异常
3. 进入第二幕时崩溃
4. 心脏战第二回合施加状态的时候存在bug
5. 怪物回合开始的结算错误（如失去格挡，心脏坚不可摧回合开始时自动恢复）
6. 战斗中加入手牌卡牌数量有问题，会一次性给 4 张（比如地狱之刃，无尽苦痛，观者平静之水给的奇迹，改造现实等）
7. 战斗中没有查看抽牌堆的按键 ui
8. 观者进入平静状态会导致崩溃的 bug
9. 查看历史记录会导致崩溃
10. 抽牌爆牌的时候会抽牌失败
11. 查看卡牌详情时会卡死
12. 地图显示有问题，精英怪显示为普通怪图标
13. 火堆有挖掘选项会崩溃的问题
14. 神化打出后会卡死的问题
15. 疯狂打出后无效的问题
16. 突破极限打出后无效的问题
17. 断魂斩打出后卡死
18. 随机获得诅咒卡变为紫色卡

修复的事件文字描述：
1. Addict
2. Big Fish
3. Golden Wing

#### 说明
author: 谢文 & lbh

email(谢文): mistletoe_wen@yeah.net

last update：2025.10.3

version：秋 中秋


